---
import PageLayout from '@/layouts/PageLayout.astro';
import SpeakersSection from '@/components/astro/SpeakersSection.astro';

// Fetch Sessionize speakers at build time - data baked into static HTML
let speakersHtml = '';
try {
  const response = await fetch(
    'https://sessionize.com/api/v2/8yksjn7s/view/Speakers?under=True'
  );
  speakersHtml = await response.text();
} catch (error) {
  console.error('Failed to fetch speakers at build time:', error);
}
---

<PageLayout
  title="Our Speakers - BSides SWFL"
  heroTitle="Our Speakers"
  heroSubtitle="Get ready to learn from a diverse lineup of experts, innovators, and passionate professionals sharing their knowledge across cybersecurity disciplines. Whether it's offensive, defensive, or everything in between, these speakers bring real-world experience and fresh perspectives to the BSides SWFL stage."
>
  <SpeakersSection />

  <!-- Embedded Speakers from Sessionize -->
  <div class="max-w-6xl mx-auto px-6 pb-44 lg:pb-40">
    {speakersHtml ? (
      <div
        set:html={speakersHtml}
        style="min-height: 600px; overflow: hidden; position: relative; z-index: 1; contain: layout style; isolation: isolate;"
        class="sessionize-container"
      />
    ) : (
      <div class="text-center py-12">
        <p class="text-gray-600">Speaker information will be available soon.</p>
      </div>
    )}
  </div>
</PageLayout>
